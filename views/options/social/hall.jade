script(type='text/ng-template', id='partials/options.social.hall.html')
  ul.nav.nav-tabs
    li(ng-class="{ active: $state.includes('options.social.hall.heroes') }")
      a(ui-sref='options.social.hall.heroes')
        =env.t('hallHeroes')
    li(ng-class="{ active: $state.includes('options.social.hall.patrons') }")
      a(ui-sref='options.social.hall.patrons')
        =env.t('hallPatrons')

  .tab-content
    .tab-pane.active
      div(ui-view)

script(type='text/ng-template', id='partials/options.social.hall.heroes.html')
  .well(ng-if='user.contributor.admin')
    h2=env.t('rewardUser')
    form(ng-submit='loadHero(_heroID)')
      .form-group
        input.form-control(type='text', ng-model='_heroID', placeholder=env.t('UUID'))
      .form-group
        input.btn.btn-default(type='submit')=env.t('loadUser')
    form(ng-show='hero', ng-submit='saveHero(hero)')
      h3 {{hero.profile.name}}
      .form-group
        input.form-control(type='text', ng-model='hero.contributor.text', placeholder=env.t('contribTitle'))
      .form-group
        label=env.t('contribLevel')
        input.form-control(type='number', step="any", ng-model='hero.contributor.level')        
        small=env.t('contribHallText')
        a(target='_blank', href='https://trello.com/c/wkFzONhE/277-contributor-gear')=env.t('moreDetails')
      .form-group
        textarea.form-control(cols=5, placeholder=env.t('contributions'), ng-model='hero.contributor.contributions')
        include ../../shared/formatting-help
      .form-group
        .checkbox
          label
            input(type='checkbox', ng-model='hero.contributor.admin')
            =env.t('admin')

        hr

        .form-group
          label=env.t('balance')
          input.form-control(type='number', step="any", ng-model='hero.balance')
          small!= '`user.balance`' + env.t('notGems')

        .form-group
          .checkbox
            label
              input(type='checkbox', ng-model='hero.purchased.ads')
              =env.t('hideAds')

        // h4 Backer Status
        // Add backer stuff like tier, disable adds, etcs
        .form-group
          input.form-control.btn.btn-primary(type='submit')=env.t('save')


  table.table.table-striped
    thead
      tr
        th=env.t('name')
        th(ng-if='user.contributor.admin')=env.t('UUID')
        th=env.t('contribLevel')
        th=env.t('title')
        th=env.t('contributions')
    tbody
      tr(ng-repeat='hero in heroes')
        td
          span(ng-if='hero.contributor.admin',popover=env.t('gamemaster'),popover-trigger='mouseenter',popover-placement='right')
            a.label.label-default(ng-class='userLevelStyle(hero)', ng-click='clickMember(hero._id, true)')
              | {{hero.profile.name}}&nbsp;
              span.glyphicon.glyphicon-star
          span(ng-if='!hero.contributor.admin')
            a.label.label-default(ng-class='userLevelStyle(hero)', ng-click='clickMember(hero._id, true)') {{hero.profile.name}}
        td(ng-if='user.contributor.admin') {{hero._id}}
        td {{hero.contributor.level}}
        td {{hero.contributor.text}}
        td
          markdown(ng-model='hero.contributor.contributions', target='_blank')

script(type='text/ng-template', id='partials/options.social.hall.patrons.html')
  table.table.table-striped(infinite-scroll="loadMore()")
    thead
      tr
        th=env.t('name')
        th(ng-if='user.contributor.admin')=env.t('UUID')
        th=env.t('backerTier')
    tbody
      tr(ng-repeat='patron in patrons')
        td
          a.label.label-default(ng-class='userLevelStyle(patron)', ng-click='clickMember(patron._id, true)') {{patron.profile.name}}
        td(ng-if='user.contributor.admin') {{patron._id}}
        td {{patron.backer.tier}}
