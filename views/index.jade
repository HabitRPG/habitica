doctype 5
html
  head
    title HabitRPG | Your Life The Role Playing Game

    script(type='text/javascript').
      window.env = !{JSON.stringify(env)};

    style.
      [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
        display: none;
      }

    // CSS
    link(rel='stylesheet', href='/bower_components/bootstrap/docs/assets/css/bootstrap.css')
    link(rel='stylesheet', href='/bower_components/bootstrap/docs/assets/css/bootstrap-responsive.css')
    link(rel='stylesheet', href='/bower_components/angular-ui/build/angular-ui.min.css')
    != css('index')

    // HabitRPG Shared
    link(rel='stylesheet', href='/bower_components/habitrpg-shared/dist/spritesheets.css')

    // JS
    script(type='text/javascript', src='/bower_components/jquery/jquery.min.js')
    script(type='text/javascript', src='/bower_components/lodash/dist/lodash.min.js')
    script(type='text/javascript', src='/bower_components/bootstrap-growl/jquery.bootstrap-growl.min.js')
    script(type='text/javascript', src='/bower_components/moment/min/moment.min.js')
    script(type='text/javascript', src='/bower_components/angular/angular.min.js')
    script(type='text/javascript', src='/bower_components/angular-route/angular-route.min.js')
    script(type='text/javascript', src='/bower_components/angular-resource/angular-resource.min.js')
    script(type='text/javascript', src='/bower_components/angular-ui/build/angular-ui.min.js')
    script(type='text/javascript', src='/bower_components/angular-ui-utils/modules/keypress/keypress.js')
    // we'll remove this once angular-bootstrap is fixed
    script(type='text/javascript', src='/bower_components/bootstrap/docs/assets/js/bootstrap.min.js')
    script(type='text/javascript', src='/bower_components/angular-bootstrap/ui-bootstrap.min.js')
    script(type='text/javascript', src='/bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js')

    // Sortable
    script(type='text/javascript', src='/bower_components/jquery-ui/ui/minified/jquery.ui.core.min.js')
    script(type='text/javascript', src='/bower_components/jquery-ui/ui/minified/jquery.ui.widget.min.js')
    script(type='text/javascript', src='/bower_components/jquery-ui/ui/minified/jquery.ui.mouse.min.js')
    script(type='text/javascript', src='/bower_components/jquery-ui/ui/minified/jquery.ui.sortable.min.js')


    script(type='text/javascript', src='/bower_components/habitrpg-shared/dist/habitrpg-shared.js')

    != js('app')

    != js('services/authServices')
    != js('services/notificationServices')
    != js('services/sharedServices')
    != js('services/userServices')
    != js('services/groupServices')

    != js('filters/filters')

    != js('directives/directives')

    != js('controllers/authCtrl')
    != js('controllers/characterCtrl')
    != js('controllers/menuCtrl')
    != js('controllers/notificationCtrl')
    != js('controllers/rootCtrl')
    != js('controllers/settingsCtrl')
    != js('controllers/statsCtrl')
    != js('controllers/tasksCtrl')
    != js('controllers/taskDetailsCtrl')
    != js('controllers/filtersCtrl')
    != js('controllers/userAvatarCtrl')
    != js('controllers/groupsCtrl')
    != js('controllers/footerCtrl')

    //webfonts
    link(href='//fonts.googleapis.com/css?family=Lato:300,400,700,400italic,700italic', rel='stylesheet', type='text/css')
    meta(name='viewport', content='width=device-width')
    meta(name='apple-mobile-web-app-capable', content='yes')

  body(ng-app="habitrpg", ng-controller="RootCtrl", ng-cloak)
    div(ng-controller='GroupsCtrl')
      include ./shared/modals/index
      include ./shared/header/header

      #notification-area(ng-controller='NotificationCtrl')
      #wrap

        // Errors
        .unstyled.alert.alert-error(ng-repeat='error in flash.errors track by $index') {{error}}
        .unstyled.alert.alert-error(ng-repeat='error in flash.warnings track by $index') {{error}}

        //if they hide the header, we still need user-menu visible
        div(ng-if='user.preferences.hideHeader')
          include ./shared/header/menu

        .exp-chart(ng-show='page.charts.exp')

        #main(ng-view)

      include ./shared/footer

    // Modal backdrop for when loading big stuff
    #loading-indicator(style='display:none;')
      .modal-backdrop
      h1(style='position:absolute;top:50%;left:45%;color:white;z-index:9000') Loading...

