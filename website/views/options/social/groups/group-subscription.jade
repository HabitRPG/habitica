//TODO: This can be a directive and the group/user can be an object passed via attribute
mixin groupSubscription()
  div(ng-show="groupPane == 'subscription'")
    .col-md-12
      .col-md-12
        h2.text-center=env.t('groupBenefitsTitle')
        .row
          .col-md-6.col-md-offset-3=env.t('groupBenefitsDescription')
        .row
          .col-md-6.col-md-offset-3(style="padding-right:5rem; padding-left:5rem;")
            ul
              li
                span=env.t('groupBenefitOne')
              li
                span=env.t('groupBenefitTwo')
              li
                span=env.t('groupBenefitThree')
              li
                span=env.t('groupBenefitFour')
              li
                span=env.t('groupBenefitFive')

        .row
          .col-md-7.col-md-offset-3
            br
            table.table.alert.alert-info(ng-if='group.purchased.plan.customerId')
              tr(ng-if='group.purchased.plan.dateTerminated'): td.alert.alert-warning
                span.noninteractive-button.btn-danger=env.t('canceledSubscription')
                i.glyphicon.glyphicon-time
                |  #{env.t('subCanceled')} <strong>{{moment(group.purchased.plan.dateTerminated).format('MM/DD/YYYY')}}</strong>
              tr(ng-if='!group.purchased.plan.dateTerminated'): td
                h4=env.t('subscribed')
                p(ng-if='group.purchased.plan.planId')=env.t('purchasedPlanId', {price: '{{Content.subscriptionBlocks[group.purchased.plan.planId].price}}', months: '{{Content.subscriptionBlocks[group.purchased.plan.planId].months}}', plan: '{{group.purchased.plan.paymentMethod}}'})
              tr(ng-if='group.purchased.plan.extraMonths'): td
                span.glyphicon.glyphicon-credit-card
                | &nbsp;#{env.t('purchasedPlanExtraMonths', {months: '{{group.purchased.plan.extraMonths | number:2}}'})}
              tr(ng-if='group.purchased.plan.consecutive.count || group.purchased.plan.consecutive.offset'): td
                span.glyphicon.glyphicon-forward
                | &nbsp;#{env.t('consecutiveSubscription')}
                ul.list-unstyled
                  li #{env.t('consecutiveMonths')} {{group.purchased.plan.consecutive.count + group.purchased.plan.consecutive.offset}}
                  li #{env.t('gemCapExtra')} {{group.purchased.plan.consecutive.gemCapExtra}}
                  li #{env.t('mysticHourglasses')} {{group.purchased.plan.consecutive.trinkets}}

            div(ng-if='group.purchased.plan.customerId')
              .btn.btn-primary(ng-if='!group.purchased.plan.dateTerminated && group.purchased.plan.paymentMethod=="Stripe"', ng-click='Payments.showStripeEdit({groupId: group.id})')=env.t('subUpdateCard')
              .btn.btn-sm.btn-danger(ng-if='!group.purchased.plan.dateTerminated', ng-click='Payments.cancelSubscription({group: group})')=env.t('cancelSub')

            .container-fluid.slight-vertical-padding(ng-if='!group.purchased.plan.customerId || (group.purchased.plan.customerId && group.purchased.plan.dateTerminated)', ng-init="_subscription.key='group_monthly'")
              .row.text-center
                .col-md-3.col-md-offset-1
                  a.purchase.btn.btn-primary(ng-click='Payments.showStripe({subscription:_subscription.key, coupon:_subscription.coupon, groupId: group.id})', ng-disabled='!_subscription.key')= env.t('card')
                .col.md-4
                  a.purchase(ng-click="Payments.amazonPayments.init({type: 'subscription', subscription:_subscription.key, coupon:_subscription.coupon, groupId: group.id})")
                    img(src='https://payments.amazon.com/gp/cba/button',alt=env.t('amazonPayments'))
               //-  .col-xs-4
               //-    a.purchase(href='/paypal/subscribe?_id={{user._id}}&apiToken={{User.settings.auth.apiToken}}&sub={{_subscription.key}}{{_subscription.coupon ? "&coupon="+_subscription.coupon : ""}}&groupId={{group.id}}', ng-disabled='!_subscription.key')
               //-      img(src='https://www.paypalobjects.com/webstatic/en_US/i/buttons/pp-acceptance-small.png',alt=env.t('paypal'))
          .row
            .col-md-6.col-md-offset-3
              .text-center=env.t('groupSubscriptionPrice')
